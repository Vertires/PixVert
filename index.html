<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Chat</title>
    <style>
        /* Basic styling for grid and chat */
        .pixel-grid {
            display: grid;
            grid-template-columns: repeat(50, 20px); /* 50 columns */
            gap: 2px;
            margin-bottom: 20px;
        }
        .pixel {
            width: 20px;
            height: 20px;
            border: 1px solid #ddd;
            cursor: pointer;
        }
        #chat-box {
            height: 200px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .chat-message {
            margin: 5px 0;
        }
        .color-button {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>Pixel Art Chat</h1>
    
    <div id="pixel-grid" class="pixel-grid"></div>

    <h2>Chat</h2>
    <div id="chat-box"></div>
    <input type="text" id="chat-input" placeholder="Type a message..." />
    <button onclick="sendMessage()">Send</button>

    <h3>Choose a Color</h3>
    <div>
        <button class="color-button" style="background-color: #FF0000;" onclick="selectColor('#FF0000')"></button>
        <button class="color-button" style="background-color: #00FF00;" onclick="selectColor('#00FF00')"></button>
        <button class="color-button" style="background-color: #0000FF;" onclick="selectColor('#0000FF')"></button>
        <button class="color-button" style="background-color: #FFFF00;" onclick="selectColor('#FFFF00')"></button>
        <button class="color-button" style="background-color: #FF00FF;" onclick="selectColor('#FF00FF')"></button>
        <button class="color-button" style="background-color: #00FFFF;" onclick="selectColor('#00FFFF')"></button>
        <button class="color-button" style="background-color: #000000;" onclick="selectColor('#000000')"></button>
        <button class="color-button" style="background-color: #FFFFFF;" onclick="selectColor('#FFFFFF')"></button>
        <button class="color-button" style="background-color: #808080;" onclick="selectColor('#808080')"></button>
        <button class="color-button" style="background-color: #C0C0C0;" onclick="selectColor('#C0C0C0')"></button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
    apiKey: "AIzaSyDYF7jJSGkpaOCHT6I1206Ye8kojuN9lTk",
    authDomain: "pixvertfun.firebaseapp.com",
    databaseURL: "https://pixvertfun-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "pixvertfun",
    storageBucket: "pixvertfun.firebasestorage.app",
    messagingSenderId: "828927840529",
    appId: "1:828927840529:web:b55459b0e4f225a9043cb0",
    measurementId: "G-8FB9QJ9STW"
  };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Set up initial variables
        let selectedColor = '#000000';  // Default color is black
        const gridSize = 12;  // 12x12 grid
        const pixelGrid = document.getElementById('pixel-grid');
        const chatBox = document.getElementById('chat-box');

        // Create the grid (12x12)
        for (let i = 0; i < gridSize * gridSize; i++) {
            const pixel = document.createElement('div');
            pixel.classList.add('pixel');
            pixel.addEventListener('click', () => placePixel(i));
            pixelGrid.appendChild(pixel);
        }

        // Listen for pixel updates from Firebase
        db.ref('pixels').on('value', (snapshot) => {
            const pixels = snapshot.val() || {};
            Object.keys(pixels).forEach(index => {
                const pixel = pixelGrid.children[index];
                pixel.style.backgroundColor = pixels[index];
            });
        });

        // Place a pixel in the grid
        function placePixel(index) {
            db.ref('pixels/' + index).set(selectedColor);
        }

        // Select a color
        function selectColor(color) {
            selectedColor = color;
        }

        // Send a chat message
        function sendMessage() {
            const message = document.getElementById('chat-input').value;
            if (message.trim()) {
                db.ref('chat').push({ message: message, timestamp: Date.now() });
                document.getElementById('chat-input').value = '';  // Clear input field
            }
        }

        // Listen for chat updates from Firebase
        db.ref('chat').limitToLast(10).on('child_added', (snapshot) => {
            const chatData = snapshot.val();
            const chatMessage = document.createElement('div');
            chatMessage.classList.add('chat-message');
            chatMessage.textContent = chatData.message;
            chatBox.appendChild(chatMessage);
            chatBox.scrollTop = chatBox.scrollHeight;  // Scroll to bottom
        });
    </script>
</body>
</html>
